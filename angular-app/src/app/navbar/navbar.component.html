<nav class="navbar navbar-default" role="navigation" cg-busy="{promise:loadingNavBar}">
    <div id="navbar-wrapper" class="container">
        <ul class="nav navbar-nav" id="navbar-interfaces" my-navbar-resize>
            <!-- Home button -->
            <li [hidden]="!navbar.home">
                <a [routerLink]="navbar.home">
                    <span class="glyphicon glyphicon-home"></span>
                </a>
            </li>
            <li id="navbar-interfaces-dropdown" class="dropdown">
                <a href="" class="dropdown-toggle" data-toggle="dropdown">
                    <span class="glyphicon glyphicon-menu-hamburger"></span>
                </a>
                <ul id="navbar-interfaces-dropdown-menu" class="dropdown-menu" role="menu"></ul>
            </li>
            <!-- TODO: add orderBy 'seqNr' to component code for items in navbar.top. orderBy pipe is not supported anymore -->
            <li id="{{item.id}}" class="top-menu-item" *ngFor="let item of navbar.top" my-nav-item data="item"></li>
        </ul>
        <ul class="nav navbar-nav navbar-right" id="navbar-options">
            <!-- hidden on extra small devices, e.g. phone (<768px) -->
            <li class="dropdown hidden-xs" uib-tooltip="Notification menu" tooltip-trigger="mouseenter" tooltip-placement="left">
                <a href="" class="dropdown-toggle" data-toggle="dropdown">
                    <span class="glyphicon glyphicon-bullhorn"></span>
                </a>
                <ul class="dropdown-menu" role="menu" (click)="$event.stopPropagation();">
                    <li class="dropdown-header">Transaction settings</li>
                    <li><mat-slide-toggle [(ngModel)]="notify_showSignals" ngDefaultControl>Show signals</mat-slide-toggle></li>
                    <li><mat-slide-toggle [(ngModel)]="notify_showInvariants" ngDefaultControl>Show invariants</mat-slide-toggle></li>
                    <li><mat-slide-toggle [(ngModel)]="autoSave" ngDefaultControl>Auto save changes</mat-slide-toggle></li>
                    <li class="dropdown-header">User logs</li>
                    <li><mat-slide-toggle [(ngModel)]="notify_showErrors" ngDefaultControl>Show errors</mat-slide-toggle></li>
                    <li><mat-slide-toggle [(ngModel)]="notify_showWarnings" ngDefaultControl>Show warnings</mat-slide-toggle></li>
                    <li><mat-slide-toggle [(ngModel)]="notify_showInfos" ngDefaultControl>Show infos</mat-slide-toggle></li>
                    <li><mat-slide-toggle [(ngModel)]="notify_showSuccesses" ngDefaultControl>Show successes</mat-slide-toggle></li>
                    <li><mat-slide-toggle [(ngModel)]="notify_autoHideSuccesses" ngDefaultControl>Auto hide successes</mat-slide-toggle></li>
                    <li class="divider" role="presentation"></li>
                    <li>
                        <a href="" (click)="resetSettingsToDefault();">
                            <span class="glyphicon glyphicon-repeat" style="margin: 4px; width: 30px;"></span>
                            <span> Default settings</span>
                        </a>
                    </li>
                </ul>
            </li>

            <!-- hidden on extra small devices, e.g. phone (<768px) -->
            <li class="dropdown hidden-xs" uib-tooltip="Tool menu" tooltip-trigger="mouseenter" tooltip-placement="left">
                <a href="" class="dropdown-toggle" data-toggle="dropdown">
                    <span class="glyphicon glyphicon-th"></span>
                </a>
                <ul class="dropdown-menu" role="menu">
                    <!-- TODO: replace ng-include -->
                    <!-- <li *ngFor="let ext of navbar.ext" ng-include="ext.url" />-->
                </ul>
            </li>

            <!-- hidden on extra small devices, e.g. phone (<768px) -->
            <!--
            <li *ngIf="navbar.new.length" class="dropdown hidden-xs" uib-tooltip="Create new" tooltip-trigger="mouseenter" tooltip-placement="left">
                <a href="" class="dropdown-toggle" data-toggle="dropdown">
                    <span class="glyphicon glyphicon-plus"></span>
                </a>
                <ul class="dropdown-menu" role="menu">
                    <li ng-repeat="item in navbar.new" ng-class="{'dropdown-submenu' : item.ifcs.length > 1}">
                        <a *ngIf="item.ifcs.length > 1" tabindex="-1" href="#">{{item.label}}</a>
                        <ul *ngIf="item.ifcs.length > 1" class="dropdown-menu" role="menu">
                            <li ng-repeat="ifc in item.ifcs">
                                <a tabindex="-1" href="#"
                                    (click)="createNewResource(ifc.resourceType, ifc.link);">{{ifc.label}}</a>
                            </li>
                        </ul>

                        <a *ngIf="item.ifcs.length == 1" href=""
                            (click)="createNewResource(item.ifcs[0].resourceType, item.ifcs[0].link);">{{item.label}}</a>
                        <span *ngIf="item.ifcs.length == 0">{{item.label}}</span>
                    </li>
                </ul>
            </li>
            -->

            <li *ngIf="a.sessionRoles.length || navbar.role.length" 
                class="dropdown"
                uib-tooltip="Role menu" tooltip-trigger="mouseenter" tooltip-placement="left">
                <a href="" class="dropdown-toggle" data-toggle="dropdown"><span
                        class="glyphicon glyphicon-user"></span></a>
                <ul class="dropdown-menu" role="menu">
                    <li *ngFor="let role of sessionRoles" (click)="$event.stopPropagation();">
                        <input [(ngModel)]="role.active" (click)="toggleRole(role.id);" type="checkbox"/>
                        <span> {{role.label}}</span>
                    </li>
                    <li *ngIf="navbar.role.length && sessionRoles.length" class="divider" role="presentation"></li>
                    <!-- TODO: replace ng-include -->
                    <!-- <li *ngFor="let ext of navbar.role" ng-include="ext.url" />-->
                </ul>
            </li>
        </ul>
    </div>
</nav>