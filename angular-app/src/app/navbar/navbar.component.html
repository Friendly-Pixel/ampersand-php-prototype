<mat-toolbar role="navigation">
    <!-- Home -->
    <button mat-icon-button routerLink="home">
        <mat-icon>home</mat-icon>
    </button>

    <span fxShow fxHide.lt-sm="true">My App</span>
    
    <!-- Menu < small -->
    <div fxHide fxShow.lt-sm="true">
        <app-navbar-item *ngFor="let item of getMenuItems(1,1)" [item]="item"></app-navbar-item>
        <div *ngIf="getMenuItems(2).length > 0" style="display: inline;">
            <button mat-button [matMenuTriggerFor]="xsMoreMenu.childMenu">
                <mat-icon>menu</mat-icon>
            </button>
            <app-menu-items #xsMoreMenu [items]="getMenuItems(2)"></app-menu-items>
        </div>
    </div>
    <!-- Menu small -->
    <div fxHide fxShow.sm="true">
        <app-navbar-item *ngFor="let item of getMenuItems(1,2)" [item]="item"></app-navbar-item>
        <div *ngIf="getMenuItems(3).length > 0" style="display: inline;">
            <button mat-button [matMenuTriggerFor]="smMoreMenu.childMenu">
                <span>More</span>
                <mat-icon>expand_more</mat-icon>
            </button>
            <app-menu-items #smMoreMenu [items]="getMenuItems(3)"></app-menu-items>
        </div>
    </div>
    <!-- Menu > small -->
    <div fxHide fxShow.gt-sm="true">
        <app-navbar-item *ngFor="let item of getMenuItems(1,4)" [item]="item"></app-navbar-item>
        <div *ngIf="getMenuItems(5).length > 0" style="display: inline;">
            <button mat-button [matMenuTriggerFor]="mdMoreMenu.childMenu">
                <span>More</span>
                <mat-icon>expand_more</mat-icon>
            </button>
            <app-menu-items #mdMoreMenu [items]="getMenuItems(5)"></app-menu-items>
        </div>
    </div>
    
    <span class="example-spacer"></span>

    <!-- New -->
    <button mat-icon-button [matMenuTriggerFor]="newMenu">
        <mat-icon>add</mat-icon>
    </button>
    <mat-menu #newMenu="matMenu">
        <ng-container *ngFor="let item of navbar.new">
            <!-- Multiple interface for new concept => sub menu structure -->
            <ng-container *ngIf="item.ifcs.length > 1">
                <button mat-menu-item [matMenuTriggerFor]="subMenu">
                    <span>{{item.label}}</span>
                </button>
                <mat-menu #subMenu="matMenu">
                    <button mat-menu-item *ngFor="let ifc of item.ifcs" routerLink="/{{ifc.link}}?new=1">{{ifc.label}}</button>
                </mat-menu>
            </ng-container>
            <!-- Single interface for new concept => direct link -->
            <ng-container *ngIf="item.ifcs.length == 1">
                <a mat-menu-item routerLink="/{{item.ifcs[0].link}}?new=1">{{item.label}}</a>
            </ng-container>
        </ng-container>
    </mat-menu>
    
    <!-- Notifications -->
    <button mat-icon-button routerLink="notifications">
        <mat-icon [matBadge]="notifySvc.nrOfNotifications" matBadgeColor="accent" [matBadgeHidden]="notifySvc.nrOfNotifications == 0">notifications</mat-icon>
    </button>

    <!-- TODO: stuff below can be removed -->
    <button mat-icon-button [matMenuTriggerFor]="notificationMenu">
        <mat-icon>notifications</mat-icon>
    </button>
    <mat-menu #notificationMenu="matMenu">
        <li mat-menu-item (click)="$event.stopPropagation()"><mat-slide-toggle [(ngModel)]="notify_showSignals" ngDefaultControl>Show signals</mat-slide-toggle></li>
        <li mat-menu-item (click)="$event.stopPropagation()"><mat-slide-toggle [(ngModel)]="notify_showInvariants" ngDefaultControl>Show invariants</mat-slide-toggle></li>
        <li mat-menu-item (click)="$event.stopPropagation()"><mat-slide-toggle [(ngModel)]="autoSave" ngDefaultControl>Auto save changes</mat-slide-toggle></li>
        <mat-divider>User logs</mat-divider>
        <li mat-menu-item (click)="$event.stopPropagation()"><mat-slide-toggle [(ngModel)]="notify_showErrors" ngDefaultControl>Show errors</mat-slide-toggle></li>
        <li mat-menu-item (click)="$event.stopPropagation()"><mat-slide-toggle [(ngModel)]="notify_showWarnings" ngDefaultControl>Show warnings</mat-slide-toggle></li>
        <li mat-menu-item (click)="$event.stopPropagation()"><mat-slide-toggle [(ngModel)]="notify_showInfos" ngDefaultControl>Show infos</mat-slide-toggle></li>
        <li mat-menu-item (click)="$event.stopPropagation()"><mat-slide-toggle [(ngModel)]="notify_showSuccesses" ngDefaultControl>Show successes</mat-slide-toggle></li>
        <li mat-menu-item (click)="$event.stopPropagation()"><mat-slide-toggle [(ngModel)]="notify_autoHideSuccesses" ngDefaultControl>Auto hide successes</mat-slide-toggle></li>
        <mat-divider>Reset</mat-divider>
        <li mat-menu-item (click)="$event.stopPropagation()">
            <a (click)="resetSettingsToDefault();">
                <mat-icon>restart_alt</mat-icon>
                <span> Default settings</span>
            </a>
        </li>
    </mat-menu>
    
    <!-- Apps and extensions menu -->
    <button fxShow fxHide.lt-sm="true" mat-icon-button [matMenuTriggerFor]="extMenu">
        <mat-icon>apps</mat-icon>
    </button>
    <mat-menu #extMenu="matMenu">
        <button mat-menu-item>
            <mat-icon>settings_backup_restore</mat-icon>
            <span>Application installer</span>
        </button>
        <button mat-menu-item (click)="notifySvc.checkAllRules()">
            <mat-icon>running_with_errors</mat-icon>
            <span>(Re)evaluate all rules</span>
        </button>
        <button mat-menu-item (click)="notifySvc.runExecEngine()">
            <mat-icon>code</mat-icon>
            <span>Run execution engine</span>
        </button>
        <button mat-menu-item>
            <mat-icon>file_upload</mat-icon>
            <span>Import population</span>
        </button>
        <button mat-menu-item>
            <mat-icon>file_download</mat-icon>
            <span>Export population</span>
        </button>
    </mat-menu>

    <!-- User role menu -->
    <button mat-icon-button [matMenuTriggerFor]="roleMenu">
        <mat-icon>person</mat-icon>
    </button>
    <mat-menu #roleMenu="matMenu">
        <li mat-menu-item *ngFor="let role of sessionRoles" (click)="$event.stopPropagation()">
            <mat-slide-toggle [ngModel]="role.active" (ngModelChange)="toggleRole(role.id)" ngDefaultControl>{{role.label}}</mat-slide-toggle>
        </li>
        <mat-divider></mat-divider>
        <button mat-menu-item>
            <mat-icon>person</mat-icon>
            <span>My account</span>
        </button>
        <button mat-menu-item>
            <mat-icon>login</mat-icon>
            <span>Login</span>
        </button>
        <button mat-menu-item>
            <mat-icon>logout</mat-icon>
            <span>Logout</span>
        </button>
    </mat-menu>
</mat-toolbar>